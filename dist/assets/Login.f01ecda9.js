import{e as g,u as E,f as s,r as i,o as v,c as V,a as t,b as u,w as m,g as y,d as _,t as D,h as S,i as j,j as k}from"./index.52efcff5.js";import{_ as B}from"./strategio.04befae5.js";const N={class:"d-flex justify-center align-center w-100 h-100"},C={class:"w-100 position-relative",style:{"max-width":"450px"}},U=t("div",{class:"text-center position-absolute",style:{right:"20px",bottom:"-30px"}},[t("img",{src:B,height:"100",width:"100",alt:"Strategio SaaS"})],-1),F={class:"w-100 pa-10",style:{"border-radius":".3rem","background-color":"rgba(255,255,255,0.97)"}},H=t("h1",null,"P\u0159ihl\xE1\u0161en\xED",-1),A=g({__name:"Login",setup(L){const f=E(),n=s(!1),d=s(),r=s(),c=s({email:[e=>!!e||"E-mail je povinn\xFD",e=>/.+@.+/.test(e)||"E-mail nen\xED validn\xED "],password:[e=>!!e||"Heslo je povinn\xE9"]}),a=s({email:"",password:""}),x=async()=>{if(d.value){n.value=!0,r.value="";const e=await k.auth.adminLoginByEmail(a.value.email,a.value.password);e.success&&e.data.user_role==="admin"?await f.push({name:"Dashboard"}):(console.error(e.errors),r.value="Nespr\xE1vn\xE9 p\u0159ihla\u0161ov\xE1cac\xED \xFAdaje."),n.value=!1}};return(e,o)=>{const p=i("v-text-field"),b=i("v-alert"),w=i("v-btn"),h=i("v-form");return v(),V("div",N,[t("div",C,[U,t("div",F,[u(h,{"validate-on":"blur",modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=l=>d.value=l),ref:"form",onSubmit:j(x,["prevent"])},{default:m(()=>[H,u(p,{label:"E-mail",modelValue:a.value.email,"onUpdate:modelValue":o[0]||(o[0]=l=>a.value.email=l),rules:c.value.email},null,8,["modelValue","rules"]),u(p,{type:"password",label:"Heslo",modelValue:a.value.password,"onUpdate:modelValue":o[1]||(o[1]=l=>a.value.password=l),rules:c.value.password},null,8,["modelValue","rules"]),r.value?(v(),y(b,{key:0,color:"error",icon:"$info",class:"mb-5"},{default:m(()=>[_(D(r.value),1)]),_:1})):S("",!0),u(w,{type:"submit",size:"large",color:"warning",loading:n.value,disabled:n.value},{default:m(()=>[_(" P\u0159ihl\xE1sit se ")]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue","onSubmit"])])])])}}});export{A as default};
